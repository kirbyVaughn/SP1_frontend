webpackJsonp([1],{"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),n=a("/ocq"),i={name:"Home",data:function(){return{validUserName:"Guest"}},mounted:function(){this.getUser()},methods:{viewMovies:function(){U.push("/movie-list")},getUser:function(){localStorage.getItem("isAuthenticates")&&!0===JSON.parse(localStorage.getItem("isAuthenticates"))&&(this.validUserName=JSON.parse(localStorage.getItem("log_user")))}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-main",[s("v-container",{attrs:{fluid:""}},[s("v-row",[s("v-col",{attrs:{align:"center",justify:"center",cols:"12"}},[s("blockquote",[e._v("\n          Welcome "+e._s(e.validUserName)+"!\n          "),s("footer",[s("small",[s("em",[e._v("— Every great film should seem new every time you see it. - Roger Ebert")])])])])])],1)],1),e._v(" "),s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"10",md:"8"}},[s("v-card",{staticClass:"elevation-2"},[s("v-container",{attrs:{fluid:"","grid-list-md":""}},[s("v-row",[s("v-col",[s("v-card",[s("v-img",{attrs:{src:a("OeLW"),height:"200px"}}),e._v(" "),s("v-card-actions",[s("v-btn",{attrs:{flat:"",color:"orange"},on:{click:e.viewMovies}},[e._v("View Details")])],1)],1)],1),e._v(" "),s("v-col",[s("v-card")],1),e._v(" "),s("v-col",[s("v-card")],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},r=a("VU/8")(i,o,!1,null,null,null).exports,l=a("mvHQ"),c=a.n(l),v=a("Zrlr"),u=a.n(v),d=a("wxAW"),m=a.n(d),h=a("mtWM"),g=a.n(h),p="http://kirbycvaughn.pythonanywhere.com/",f=function(){function e(){u()(this,e)}return m()(e,[{key:"getMovie",value:function(e){var t=p+"/api/movies/"+e,a=localStorage.getItem("token");console.log(":::jwtToken:::::"+a);return g.a.get(t,{headers:{Authorization:"jwt "+a}})}},{key:"getMovieList",value:function(){var e=localStorage.getItem("token");console.log(":::jwtToken:::::"+e);var t={Authorization:"jwt "+e};return g.a.get("http://kirbycvaughn.pythonanywhere.com//api/movies/",{headers:t})}},{key:"addNewMovie",value:function(e){var t={Authorization:"jwt "+localStorage.getItem("token")};return g.a.post("http://kirbycvaughn.pythonanywhere.com//api/movies/",e,{headers:t})}},{key:"updateMovie",value:function(e){var t=p+"/api/movies/"+e.pk,a={Authorization:"jwt "+localStorage.getItem("token")};return g.a.put(t,e,{headers:a})}},{key:"deleteMovie",value:function(e){var t=p+"/api/movies/"+e,a={Authorization:"jwt "+localStorage.getItem("token")};return g.a.delete(t,{headers:a})}},{key:"authenticateLogin",value:function(e){return g.a.post("http://kirbycvaughn.pythonanywhere.com//auth/",e)}}]),e}(),_=new f,w={name:"Auth",data:function(){return{credentials:{},valid:!0,showMsg:"",loading:!1,rules:{username:[function(e){return!!e||"Username is required"},function(e){return e&&e.length>3||"A username must be more than 3 characters long"},function(e){return/^[a-z0-9_]+$/.test(e)||"A username can only contain letters and digits"}],password:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>7||"The password must be longer than 7 characters"}]},showPassword:!1}},methods:{login:function(){var e=this;this.$refs.form.validate()&&(this.loading=!0,_.authenticateLogin(this.credentials).then(function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("isAuthenticates",c()(!0)),localStorage.setItem("log_user",c()(e.credentials.username)),window.location="/"}).catch(function(t){e.loading=!1,localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),e.showMsg="error"}))}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[a("v-card",{staticClass:"mx-auto elevation-6"},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Login")])]),e._v(" "),"error"===e.showMsg?a("v-alert",{attrs:{dismissible:"","close-icon":"mdi-close-circle",value:!0,type:"error",icon:"mdi-alert",dense:""}},[e._v("\n          Invalid username or password. Please Try again.\n        ")]):e._e(),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-text",[e.loading?a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-text-field",{attrs:{counter:70,label:"Username",rules:e.rules.username,maxlength:"70",required:"","prepend-icon":"mdi-account-circle"},model:{value:e.credentials.username,callback:function(t){e.$set(e.credentials,"username",t)},expression:"credentials.username"}}),e._v(" "),a("v-text-field",{attrs:{type:e.showPassword?"text":"Password",counter:20,label:"Password",rules:e.rules.password,maxlength:"20",required:"","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1),e._v(" "),a("v-btn",{staticClass:"info",attrs:{disabled:!e.valid},on:{click:e.login}},[e._v("Login")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},b=a("VU/8")(w,k,!1,null,null,null).exports,y=new f,M={name:"MovieList",data:function(){return{movies:[],validUserName:"Guest",movieSize:0,showMsg:"",isMobile:!1,headers:[{text:"Name",sortable:!1,align:"left"},{text:"Description",sortable:!1,align:"left"},{text:"Year",sortable:!1,align:"left"},{text:"Rating",sortable:!1,align:"left"},{text:"Update",sortable:!1,align:"center"},{text:"Delete",sortable:!1,align:"center"}]}},mounted:function(){this.getMovies(),this.showMessages()},methods:{onResize:function(){window.innerWidth>600?this.isMobile=!0:this.isMobile=!1},showMessages:function(){console.log(this.$route.params.msg),this.$route.params.msg&&(this.showMsg=this.$route.params.msg)},getMovies:function(){var e=this;y.getMovieList().then(function(t){e.movies=t.data.data,console.log(t.data.data),console.log(t.data),e.movieSize=e.movies.length,localStorage.getItem("isAuthenticates")&&!0===JSON.parse(localStorage.getItem("isAuthenticates"))&&(e.validUserName=JSON.parse(localStorage.getItem("log_user")))}).catch(function(e){401===e.response.status&&(localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),U.push("/auth"))})},addNewMovie:function(){localStorage.getItem("isAuthenticates")&&!0===JSON.parse(localStorage.getItem("isAuthenticates"))?U.push("/movie-create"):U.push("/auth")},updateMovie:function(e){U.push("/movie-create/"+e.pk)},deleteMovie:function(e){var t=this;y.deleteMovie(e.pk).then(function(e){204===e.status&&(U.push("/movie-list/deleted/"),t.getMovies())}).catch(function(e){401===e.response.status&&(localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),U.push("/auth"))})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",align:"center",justify:"center"}},[a("blockquote",[e._v("\n          Welcome "+e._s(e.validUserName)+"!\n          "),a("footer",[a("small",[a("em",[e._v("— Every great film should seem new every time you see it. - Roger Ebert")])])])])]),e._v(" "),a("v-col",{attrs:{cols:"12",md:"10",lg:"10",align:"center",justify:"center"}},["new"===e.showMsg?a("v-alert",{attrs:{dismissible:"",value:!0,type:"success"}},[e._v("\n          New movie has been added.\n        ")]):e._e(),e._v(" "),"update"===e.showMsg?a("v-alert",{attrs:{dismissible:"",value:!0,type:"success"}},[e._v("\n          Movie information has been updated.\n        ")]):e._e(),e._v(" "),"deleted"===e.showMsg?a("v-alert",{attrs:{dismissible:"",value:!0,type:"success"}},[e._v("\n          Selected Movie has been deleted.\n        ")]):e._e()],1)],1),e._v(" "),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],attrs:{cols:"12",md:"10"}},[e.isMobile?a("v-data-table",{staticClass:"elevation-1",staticStyle:{"max-height":"300px","overflow-y":"auto"},attrs:{headers:e.headers,items:e.movies},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",{attrs:{align:"left"}},[e._v(e._s(t.item.name))]),e._v(" "),a("td",{attrs:{align:"left"}},[e._v(e._s(t.item.description))]),e._v(" "),a("td",{attrs:{align:"left"}},[e._v(e._s(t.item.year))]),e._v(" "),a("td",{attrs:{align:"left"}},[e._v(e._s(t.item.rating))]),e._v(" "),a("td",{attrs:{align:"center"}},[a("v-icon",{on:{click:function(a){return e.updateMovie(t.item)}}},[e._v("mdi-pencil")])],1),e._v(" "),a("td",{attrs:{align:"center"}},[a("v-icon",{on:{click:function(a){return e.deleteMovie(t.item)}}},[e._v("mdi-delete")])],1)])]}}],null,!1,2550820350)}):a("v-data-iterator",{attrs:{items:e.movies,"hide-default-footer":""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.items,n=t.isExpanded,i=t.expand;return[a("v-row",e._l(s,function(t){return a("v-col",{key:t.name,attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{staticClass:"pb-0 pt-0 pl-0"},[a("v-col",{staticClass:"text-left body-2 text-truncate",attrs:{cols:"9"}},[e._v(e._s(t.name))]),e._v(" "),a("v-col",{staticClass:"text-center",attrs:{cols:"3"}},[a("v-card-actions",[a("v-icon",{staticClass:"small",on:{click:function(a){return e.updateMovie(t)}}},[e._v("mdi-pencil")]),e._v(" "),a("v-icon",{staticClass:"small",on:{click:function(a){return e.deleteMovie(t)}}},[e._v("mdi-delete")]),e._v(" "),a("v-icon",{staticClass:"small",nativeOn:{click:function(e){i(t,!n(t))}}},[e._v("mdi-dots-horizontal")])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-list",{directives:[{name:"show",rawName:"v-show",value:n(t),expression:"isExpanded(item)"}],attrs:{dense:""}},[a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[e._v(e._s(t.description))])],1),e._v(" "),a("v-list-item",[a("v-list-item-content",[e._v("Year:")]),e._v(" "),a("v-list-item-content",{staticClass:"align-end"},[e._v(e._s(t.year))])],1),e._v(" "),a("v-list-item",[a("v-list-item-content",[e._v("Rating:")]),e._v(" "),a("v-list-item-content",{staticClass:"align-end"},[e._v(e._s(t.rating))])],1)],1)],1)],1)}),1)]}}])}),e._v(" "),a("v-btn",{staticClass:"blue mt-4 white--text",on:{click:e.addNewMovie}},[e._v("Add Movie")])],1)],1)],1)],1)},staticRenderFns:[]},S=a("VU/8")(M,x,!1,null,null,null).exports,I=new f,C={name:"MovieCreate",components:{},data:function(){return{showError:!1,movie:{},pageTitle:"Add New Movie",isUpdate:!1,showMsg:""}},methods:{createMovie:function(){var e=this;I.addNewMovie(this.movie).then(function(t){201===t.status?(e.movie=t.data,e.showMsg="",U.push("/movie-list/new")):e.showMsg="error"}).catch(function(t){401===t.response.status?U.push("/auth"):400===t.response.status&&(e.showMsg="error")})},cancelOperation:function(){U.push("/movie-list")},updateMovie:function(){var e=this;I.updateMovie(this.movie).then(function(t){200===t.status?(e.movie=t.data,U.push("/movie-list/update")):e.showMsg="error"}).catch(function(t){401===t.response.status?U.push("/auth"):400===t.response.status&&(e.showMsg="error")})}},mounted:function(){var e=this;this.$route.params.pk&&(this.pageTitle="Edit Movie",this.isUpdate=!0,I.getMovie(this.$route.params.pk).then(function(t){e.movie=t.data}).catch(function(e){401===e.response.status&&U.push("/auth")}))}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"align-center"},[a("v-row",{staticClass:"align-center",attrs:{justify:"center"}},[a("v-col",{staticClass:"align-center",attrs:{cols:"12",sm:"10",md:"10",lg:"6"}},["error"===e.showMsg?a("v-alert",{attrs:{dismissible:"",value:!0,type:"error"}},[e._v("\n            Please verify Movie information.\n          ")]):e._e()],1)],1),e._v(" "),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"align-center",attrs:{cols:"12",sm:"10",md:"10",lg:"6"}},[a("v-card",{staticClass:"login-card"},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.pageTitle))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-container",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.movie.name,callback:function(t){e.$set(e.movie,"name",t)},expression:"movie.name"}}),e._v(" "),a("v-text-field",{attrs:{label:"Description",required:""},model:{value:e.movie.description,callback:function(t){e.$set(e.movie,"description",t)},expression:"movie.description"}}),e._v(" "),a("v-text-field",{attrs:{label:"Year",required:""},model:{value:e.movie.year,callback:function(t){e.$set(e.movie,"year",t)},expression:"movie.year"}}),e._v(" "),a("v-text-field",{attrs:{label:"Rating",required:""},model:{value:e.movie.rating,callback:function(t){e.$set(e.movie,"rating",t)},expression:"movie.rating"}})],1),e._v(" "),e.isUpdate?e._e():a("v-btn",{staticClass:"blue white--text",on:{click:e.createMovie}},[e._v("Save")]),e._v(" "),e.isUpdate?a("v-btn",{staticClass:"blue white--text",on:{click:e.updateMovie}},[e._v("Update")]):e._e(),e._v(" "),a("v-btn",{staticClass:"white black--text",on:{click:e.cancelOperation}},[e._v("Cancel")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(C,A,!1,function(e){a("gD6t")},"data-v-7db369ae",null).exports;s.default.use(n.a);var U=new n.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"Home",component:r},{path:"/movie-list",name:"MovieList",component:S},{path:"/movie-list/:msg",name:"MovieUpdatedList",component:S},{path:"/movie-create",name:"MovieCreate",component:N},{path:"/movie-create/:pk",name:"MovieUpdate",component:N},{path:"/auth",name:"Auth",component:b}]}),j=new f,z={name:"App",data:function(){return{authenticated:!1,dialog:!1,menu:[{title:"Home",url:"/"},{title:"Movies",url:"/movie-list"}]}},mounted:function(){var e=this;j.getMovieList().then(function(t){e.authenticated=!0}).catch(function(t){401===t.response.status&&(localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),e.authenticated=!1)}),console.log("this.authenticated--"+this.authenticated)},methods:{logout:function(){localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),this.authenticated=!1,window.location="/"},login:function(){U.push("/auth")}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"green"}},[a("v-toolbar-title",[e._v("My Favorite Movies")]),e._v(" "),a("v-spacer"),e._v(" "),a("div",{staticClass:"hidden-xs-only"},[e._l(e.menu,function(t){return a("v-btn",{key:t.title,attrs:{to:t.url,flat:"",text:"",rounded:"",dark:""}},[e._v(e._s(t.title))])}),e._v(" "),e.authenticated?e._e():a("v-btn",{attrs:{flat:"",dark:"",text:"",rounded:""},on:{click:e.login}},[e._v("Log in\n      ")]),e._v(" "),e.authenticated?a("v-btn",{attrs:{flat:"",dark:"",text:"",rounded:""},on:{click:e.logout}},[e._v("Log Out\n      ")]):e._e()],2),e._v(" "),a("div",{staticClass:"hidden-sm-and-up"},[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{dark:"",icon:""}},"v-btn",n,!1),s),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[e._v(" "),a("v-list",[e._l(e.menu,function(t){return a("v-list-item",{key:t.title,attrs:{to:t.url}},[e._v(e._s(t.title))])}),e._v(" "),e.authenticated?e._e():a("v-list-item",{on:{click:e.login}},[e._v("Log in")]),e._v(" "),e.authenticated?a("v-list-item",{on:{click:e.logout}},[e._v("Log out")]):e._e()],2)],1)],1)],1),e._v(" "),a("v-content",[a("router-view")],1)],1)},staticRenderFns:[]},E=a("VU/8")(z,$,!1,null,null,null).exports,L=a("3EgV"),O=a.n(L),R=(a("7zck"),a("18Sv")),q=a.n(R);a("csSS");s.default.use(O.a,{icons:{iconfont:"mdi"}}),s.default.use(q.a),s.default.config.productionTip=!1,new s.default({vuetify:new O.a,el:"#app",router:U,components:{App:E},template:"<App/>"})},OeLW:function(e,t,a){e.exports=a.p+"static/img/customer.5ed8963.jpg"},csSS:function(e,t){},gD6t:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e9669db0f0855e8937f6.js.map